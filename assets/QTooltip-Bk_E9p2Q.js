import{ad as Ce,ae as Te,af as q,ag as M,ah as X,ai as Se,aj as E,ak as K,al as z,am as Y,an as He,S as fe,g as he,r as B,A as Me,R as qe,w as k,o as ke,B as $,ao as Q,ap as ne,aq as Le,k as Pe,ar as N,n as We,as as Ae,p as ze,c as A,at as Be,q as $e,au as De,x as Oe,av as je,aw as Re,h as ie,a9 as _e,l as Xe}from"./index-DGn4lBwy.js";const U={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ye=Object.keys(U);U.all=!0;function oe(t){const n={};for(const o of Ye)t[o]===!0&&(n[o]=!0);return Object.keys(n).length===0?U:(n.horizontal===!0?n.left=n.right=!0:n.left===!0&&n.right===!0&&(n.horizontal=!0),n.vertical===!0?n.up=n.down=!0:n.up===!0&&n.down===!0&&(n.vertical=!0),n.horizontal===!0&&n.vertical===!0&&(n.all=!0),n)}const Ne=["INPUT","TEXTAREA"];function le(t,n){return n.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof n.handler=="function"&&Ne.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(n.uid)===-1)}function D(){if(window.getSelection!==void 0){const t=window.getSelection();t.empty!==void 0?t.empty():t.removeAllRanges!==void 0&&(t.removeAllRanges(),Ce.is.mobile!==!0&&t.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function F(t,n,o){const l=K(t);let e,i=l.left-n.event.x,r=l.top-n.event.y,s=Math.abs(i),c=Math.abs(r);const a=n.direction;a.horizontal===!0&&a.vertical!==!0?e=i<0?"left":"right":a.horizontal!==!0&&a.vertical===!0?e=r<0?"up":"down":a.up===!0&&r<0?(e="up",s>c&&(a.left===!0&&i<0?e="left":a.right===!0&&i>0&&(e="right"))):a.down===!0&&r>0?(e="down",s>c&&(a.left===!0&&i<0?e="left":a.right===!0&&i>0&&(e="right"))):a.left===!0&&i<0?(e="left",s<c&&(a.up===!0&&r<0?e="up":a.down===!0&&r>0&&(e="down"))):a.right===!0&&i>0&&(e="right",s<c&&(a.up===!0&&r<0?e="up":a.down===!0&&r>0&&(e="down")));let h=!1;if(e===void 0&&o===!1){if(n.event.isFirst===!0||n.event.lastDir===void 0)return{};e=n.event.lastDir,h=!0,e==="left"||e==="right"?(l.left-=i,s=0,i=0):(l.top-=r,c=0,r=0)}return{synthetic:h,payload:{evt:t,touch:n.event.mouse!==!0,mouse:n.event.mouse===!0,position:l,direction:e,isFirst:n.event.isFirst,isFinal:o===!0,duration:Date.now()-n.event.time,distance:{x:s,y:c},offset:{x:i,y:r},delta:{x:l.left-n.event.lastX,y:l.top-n.event.lastY}}}}let Fe=0;const tt=Te({name:"touch-pan",beforeMount(t,{value:n,modifiers:o}){if(o.mouse!==!0&&M.has.touch!==!0)return;function l(i,r){o.mouse===!0&&r===!0?fe(i):(o.stop===!0&&Y(i),o.prevent===!0&&z(i))}const e={uid:"qvtp_"+Fe++,handler:n,modifiers:o,direction:oe(o),noop:Se,mouseStart(i){le(i,e)&&He(i)&&(E(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(i,!0))},touchStart(i){if(le(i,e)){const r=i.target;E(e,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","passiveCapture"],[r,"touchend","end","passiveCapture"]]),e.start(i)}},start(i,r){if(M.is.firefox===!0&&X(t,!0),e.lastEvt=i,r===!0||o.stop===!0){if(e.direction.all!==!0&&(r!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const a=i.type.indexOf("mouse")!==-1?new MouseEvent(i.type,i):new TouchEvent(i.type,i);i.defaultPrevented===!0&&z(a),i.cancelBubble===!0&&Y(a),Object.assign(a,{qKeyEvent:i.qKeyEvent,qClickOutside:i.qClickOutside,qAnchorHandled:i.qAnchorHandled,qClonedBy:i.qClonedBy===void 0?[e.uid]:i.qClonedBy.concat(e.uid)}),e.initialEvent={target:i.target,event:a}}Y(i)}const{left:s,top:c}=K(i);e.event={x:s,y:c,time:Date.now(),mouse:r===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:s,lastY:c}},move(i){if(e.event===void 0)return;const r=K(i),s=r.left-e.event.x,c=r.top-e.event.y;if(s===0&&c===0)return;e.lastEvt=i;const a=e.event.mouse===!0,h=()=>{l(i,a);let u;o.preserveCursor!==!0&&o.preservecursor!==!0&&(u=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),a===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),D(),e.styleCleanup=d=>{if(e.styleCleanup=void 0,u!==void 0&&(document.documentElement.style.cursor=u),document.body.classList.remove("non-selectable"),a===!0){const b=()=>{document.body.classList.remove("no-pointer-events--children")};d!==void 0?setTimeout(()=>{b(),d()},50):b()}else d!==void 0&&d()}};if(e.event.detected===!0){e.event.isFirst!==!0&&l(i,e.event.mouse);const{payload:u,synthetic:d}=F(i,e,!1);u!==void 0&&(e.handler(u)===!1?e.end(i):(e.styleCleanup===void 0&&e.event.isFirst===!0&&h(),e.event.lastX=u.position.left,e.event.lastY=u.position.top,e.event.lastDir=d===!0?void 0:u.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||a===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){h(),e.event.detected=!0,e.move(i);return}const m=Math.abs(s),v=Math.abs(c);m!==v&&(e.direction.horizontal===!0&&m>v||e.direction.vertical===!0&&m<v||e.direction.up===!0&&m<v&&c<0||e.direction.down===!0&&m<v&&c>0||e.direction.left===!0&&m>v&&s<0||e.direction.right===!0&&m>v&&s>0?(e.event.detected=!0,e.move(i)):e.end(i,!0))},end(i,r){if(e.event!==void 0){if(q(e,"temp"),M.is.firefox===!0&&X(t,!1),r===!0)e.styleCleanup?.(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(F(i===void 0?e.lastEvt:i,e).payload);const{payload:s}=F(i===void 0?e.lastEvt:i,e,!0),c=()=>{e.handler(s)};e.styleCleanup!==void 0?e.styleCleanup(c):c()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(t.__qtouchpan=e,o.mouse===!0){const i=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";E(e,"main",[[t,"mousedown","mouseStart",`passive${i}`]])}M.has.touch===!0&&E(e,"main",[[t,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,n){const o=t.__qtouchpan;o!==void 0&&(n.oldValue!==n.value&&(typeof value!="function"&&o.end(),o.handler=n.value),o.direction=oe(n.modifiers))},beforeUnmount(t){const n=t.__qtouchpan;n!==void 0&&(n.event!==void 0&&n.end(),q(n,"main"),q(n,"temp"),M.is.firefox===!0&&X(t,!1),n.styleCleanup?.(),delete t.__qtouchpan)}});function nt(t,n,o){return o<=n?n:Math.min(o,Math.max(n,t))}const Ve={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean};function Ke({showing:t,avoidEmit:n,configureAnchorEl:o}){const{props:l,proxy:e,emit:i}=he(),r=B(null);let s=null;function c(u){return r.value===null?!1:u===void 0||u.touches===void 0||u.touches.length<=1}const a={};o===void 0&&(Object.assign(a,{hide(u){e.hide(u)},toggle(u){e.toggle(u),u.qAnchorHandled=!0},toggleKey(u){qe(u,13)===!0&&a.toggle(u)},contextClick(u){e.hide(u),z(u),Me(()=>{e.show(u),u.qAnchorHandled=!0})},prevent:z,mobileTouch(u){if(a.mobileCleanup(u),c(u)!==!0)return;e.hide(u),r.value.classList.add("non-selectable");const d=u.target;E(a,"anchor",[[d,"touchmove","mobileCleanup","passive"],[d,"touchend","mobileCleanup","passive"],[d,"touchcancel","mobileCleanup","passive"],[r.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,e.show(u),u.qAnchorHandled=!0},300)},mobileCleanup(u){r.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),t.value===!0&&u!==void 0&&D()}}),o=function(u=l.contextMenu){if(l.noParentEvent===!0||r.value===null)return;let d;u===!0?e.$q.platform.is.mobile===!0?d=[[r.value,"touchstart","mobileTouch","passive"]]:d=[[r.value,"mousedown","hide","passive"],[r.value,"contextmenu","contextClick","notPassive"]]:d=[[r.value,"click","toggle","passive"],[r.value,"keyup","toggleKey","passive"]],E(a,"anchor",d)});function h(){q(a,"anchor")}function m(u){for(r.value=u;r.value.classList.contains("q-anchor--skip");)r.value=r.value.parentNode;o()}function v(){if(l.target===!1||l.target===""||e.$el.parentNode===null)r.value=null;else if(l.target===!0)m(e.$el.parentNode);else{let u=l.target;if(typeof l.target=="string")try{u=document.querySelector(l.target)}catch{u=void 0}u!=null?(r.value=u.$el||u,o()):(r.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return k(()=>l.contextMenu,u=>{r.value!==null&&(h(),o(u))}),k(()=>l.target,()=>{r.value!==null&&h(),v()}),k(()=>l.noParentEvent,u=>{r.value!==null&&(u===!0?h():o())}),ke(()=>{v(),n!==!0&&l.modelValue===!0&&r.value===null&&i("update:modelValue",!1)}),$(()=>{s!==null&&clearTimeout(s),h()}),{anchorEl:r,canShow:c,anchorEvents:a}}function Qe(t,n){const o=B(null);let l;function e(s,c){const a=`${c!==void 0?"add":"remove"}EventListener`,h=c!==void 0?c:l;s!==window&&s[a]("scroll",h,Q.passive),window[a]("scroll",h,Q.passive),l=c}function i(){o.value!==null&&(e(o.value),o.value=null)}const r=k(()=>t.noParentEvent,()=>{o.value!==null&&(i(),n())});return $(r),{localScrollTarget:o,unconfigureScrollTarget:i,changeScrollEvent:e}}const{notPassiveCapture:O}=Q,S=[];function j(t){const n=t.target;if(n===void 0||n.nodeType===8||n.classList.contains("no-pointer-events")===!0)return;let o=ne.length-1;for(;o>=0;){const l=ne[o].$;if(l.type.name==="QTooltip"){o--;continue}if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;o--}for(let l=S.length-1;l>=0;l--){const e=S[l];if((e.anchorEl.value===null||e.anchorEl.value.contains(n)===!1)&&(n===document.body||e.innerRef.value!==null&&e.innerRef.value.contains(n)===!1))t.qClickOutside=!0,e.onClickOutside(t);else return}}function Ie(t){S.push(t),S.length===1&&(document.addEventListener("mousedown",j,O),document.addEventListener("touchstart",j,O))}function re(t){const n=S.findIndex(o=>o===t);n!==-1&&(S.splice(n,1),S.length===0&&(document.removeEventListener("mousedown",j,O),document.removeEventListener("touchstart",j,O)))}let ae,ue;function se(t){const n=t.split(" ");return n.length!==2?!1:["top","center","bottom"].includes(n[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(n[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ue(t){return t?!(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number"):!0}const I={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(t=>{I[`${t}#ltr`]=t,I[`${t}#rtl`]=t});function ce(t,n){const o=t.split(" ");return{vertical:o[0],horizontal:I[`${o[1]}#${n===!0?"rtl":"ltr"}`]}}function Ge(t,n){let{top:o,left:l,right:e,bottom:i,width:r,height:s}=t.getBoundingClientRect();return n!==void 0&&(o-=n[1],l-=n[0],i+=n[1],e+=n[0],r+=n[0],s+=n[1]),{top:o,bottom:i,height:s,left:l,right:e,width:r,middle:l+(e-l)/2,center:o+(i-o)/2}}function Je(t,n,o){let{top:l,left:e}=t.getBoundingClientRect();return l+=n.top,e+=n.left,o!==void 0&&(l+=o[1],e+=o[0]),{top:l,bottom:l+1,height:1,left:e,right:e+1,width:1,middle:e,center:l}}function Ze(t,n){return{top:0,center:n/2,bottom:n,left:0,middle:t/2,right:t}}function de(t,n,o,l){return{top:t[o.vertical]-n[l.vertical],left:t[o.horizontal]-n[l.horizontal]}}function ve(t,n=0){if(t.targetEl===null||t.anchorEl===null||n>5)return;if(t.targetEl.offsetHeight===0||t.targetEl.offsetWidth===0){setTimeout(()=>{ve(t,n+1)},10);return}const{targetEl:o,offset:l,anchorEl:e,anchorOrigin:i,selfOrigin:r,absoluteOffset:s,fit:c,cover:a,maxHeight:h,maxWidth:m}=t;if(M.is.ios===!0&&window.visualViewport!==void 0){const H=document.body.style,{offsetLeft:y,offsetTop:w}=window.visualViewport;y!==ae&&(H.setProperty("--q-pe-left",y+"px"),ae=y),w!==ue&&(H.setProperty("--q-pe-top",w+"px"),ue=w)}const{scrollLeft:v,scrollTop:u}=o,d=s===void 0?Ge(e,a===!0?[0,0]:l):Je(e,s,l);Object.assign(o.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:m,maxHeight:h,visibility:"visible"});const{offsetWidth:b,offsetHeight:L}=o,{elWidth:R,elHeight:W}=c===!0||a===!0?{elWidth:Math.max(d.width,b),elHeight:a===!0?Math.max(d.height,L):L}:{elWidth:b,elHeight:L};let g={maxWidth:m,maxHeight:h};(c===!0||a===!0)&&(g.minWidth=d.width+"px",a===!0&&(g.minHeight=d.height+"px")),Object.assign(o.style,g);const C=Ze(R,W);let f=de(d,C,i,r);if(s===void 0||l===void 0)V(f,d,C,i,r);else{const{top:H,left:y}=f;V(f,d,C,i,r);let w=!1;if(f.top!==H){w=!0;const x=2*l[1];d.center=d.top-=x,d.bottom-=x+2}if(f.left!==y){w=!0;const x=2*l[0];d.middle=d.left-=x,d.right-=x+2}w===!0&&(f=de(d,C,i,r),V(f,d,C,i,r))}g={top:f.top+"px",left:f.left+"px"},f.maxHeight!==void 0&&(g.maxHeight=f.maxHeight+"px",d.height>f.maxHeight&&(g.minHeight=g.maxHeight)),f.maxWidth!==void 0&&(g.maxWidth=f.maxWidth+"px",d.width>f.maxWidth&&(g.minWidth=g.maxWidth)),Object.assign(o.style,g),o.scrollTop!==u&&(o.scrollTop=u),o.scrollLeft!==v&&(o.scrollLeft=v)}function V(t,n,o,l,e){const i=o.bottom,r=o.right,s=Le(),c=window.innerHeight-s,a=document.body.clientWidth;if(t.top<0||t.top+i>c)if(e.vertical==="center")t.top=n[l.vertical]>c/2?Math.max(0,c-i):0,t.maxHeight=Math.min(i,c);else if(n[l.vertical]>c/2){const h=Math.min(c,l.vertical==="center"?n.center:l.vertical===e.vertical?n.bottom:n.top);t.maxHeight=Math.min(i,h),t.top=Math.max(0,h-i)}else t.top=Math.max(0,l.vertical==="center"?n.center:l.vertical===e.vertical?n.top:n.bottom),t.maxHeight=Math.min(i,c-t.top);if(t.left<0||t.left+r>a)if(t.maxWidth=Math.min(r,a),e.horizontal==="middle")t.left=n[l.horizontal]>a/2?Math.max(0,a-r):0;else if(n[l.horizontal]>a/2){const h=Math.min(a,l.horizontal==="middle"?n.middle:l.horizontal===e.horizontal?n.right:n.left);t.maxWidth=Math.min(r,h),t.left=Math.max(0,h-t.maxWidth)}else t.left=Math.max(0,l.horizontal==="middle"?n.middle:l.horizontal===e.horizontal?n.left:n.right),t.maxWidth=Math.min(r,a-t.left)}const it=Pe({name:"QTooltip",inheritAttrs:!1,props:{...Ve,...ze,...N,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...N.transitionShow,default:"jump-down"},transitionHide:{...N.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:se},self:{type:String,default:"top middle",validator:se},offset:{type:Array,default:()=>[14,14],validator:Ue},scrollTarget:Ae,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...We],setup(t,{slots:n,emit:o,attrs:l}){let e,i;const r=he(),{proxy:{$q:s}}=r,c=B(null),a=B(!1),h=A(()=>ce(t.anchor,s.lang.rtl)),m=A(()=>ce(t.self,s.lang.rtl)),v=A(()=>t.persistent!==!0),{registerTick:u,removeTick:d}=Be(),{registerTimeout:b}=$e(),{transitionProps:L,transitionStyle:R}=De(t),{localScrollTarget:W,changeScrollEvent:g,unconfigureScrollTarget:C}=Qe(t,ee),{anchorEl:f,canShow:H,anchorEvents:y}=Ke({showing:a,configureAnchorEl:we}),{show:w,hide:x}=Oe({showing:a,canShow:H,handleShow:pe,handleHide:ge,hideOnRouteChange:v,processOnMount:!0});Object.assign(y,{delayShow:ye,delayHide:be});const{showPortal:G,hidePortal:J,renderPortal:me}=je(r,c,Ee,"tooltip");if(s.platform.is.mobile===!0){const p={anchorEl:f,innerRef:c,onClickOutside(T){return x(T),T.target.classList.contains("q-dialog__backdrop")&&fe(T),!0}},_=A(()=>t.modelValue===null&&t.persistent!==!0&&a.value===!0);k(_,T=>{(T===!0?Ie:re)(p)}),$(()=>{re(p)})}function pe(p){G(),u(()=>{i=new MutationObserver(()=>P()),i.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),P(),ee()}),e===void 0&&(e=k(()=>s.screen.width+"|"+s.screen.height+"|"+t.self+"|"+t.anchor+"|"+s.lang.rtl,P)),b(()=>{G(!0),o("show",p)},t.transitionDuration)}function ge(p){d(),J(),Z(),b(()=>{J(!0),o("hide",p)},t.transitionDuration)}function Z(){i!==void 0&&(i.disconnect(),i=void 0),e!==void 0&&(e(),e=void 0),C(),q(y,"tooltipTemp")}function P(){ve({targetEl:c.value,offset:t.offset,anchorEl:f.value,anchorOrigin:h.value,selfOrigin:m.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function ye(p){if(s.platform.is.mobile===!0){D(),document.body.classList.add("non-selectable");const _=f.value,T=["touchmove","touchcancel","touchend","click"].map(te=>[_,te,"delayHide","passiveCapture"]);E(y,"tooltipTemp",T)}b(()=>{w(p)},t.delay)}function be(p){s.platform.is.mobile===!0&&(q(y,"tooltipTemp"),D(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),b(()=>{x(p)},t.hideDelay)}function we(){if(t.noParentEvent===!0||f.value===null)return;const p=s.platform.is.mobile===!0?[[f.value,"touchstart","delayShow","passive"]]:[[f.value,"mouseenter","delayShow","passive"],[f.value,"mouseleave","delayHide","passive"]];E(y,"anchor",p)}function ee(){if(f.value!==null||t.scrollTarget!==void 0){W.value=Re(f.value,t.scrollTarget);const p=t.noParentEvent===!0?P:x;g(W.value,p)}}function xe(){return a.value===!0?ie("div",{...l,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,R.value],role:"tooltip"},Xe(n.default)):null}function Ee(){return ie(_e,L.value,xe)}return $(Z),Object.assign(r.proxy,{updatePosition:P}),me}});export{it as Q,tt as T,nt as b};
