import{aN as Ce,aO as Se,aP as q,aQ as M,aR as X,a0 as He,aS as E,V as I,ab as z,ae as N,aT as Me,F as fe,g as he,r as O,q as qe,I as Pe,w as P,s as Le,t as B,aU as K,aV as ne,aW as We,c as ke,L as Y,f as Ae,K as ze,i as Oe,a as A,M as Be,j as $e,O as De,n as je,P as Re,X as _e,h as ie,_ as Xe,b as Ne}from"./index-Cuavt_VU.js";const U={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ye=Object.keys(U);U.all=!0;function oe(n){const t={};for(const o of Ye)n[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?U:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const Fe=["INPUT","TEXTAREA"];function le(n,t){return t.event===void 0&&n.target!==void 0&&n.target.draggable!==!0&&typeof t.handler=="function"&&Fe.includes(n.target.nodeName.toUpperCase())===!1&&(n.qClonedBy===void 0||n.qClonedBy.indexOf(t.uid)===-1)}function $(){if(window.getSelection!==void 0){const n=window.getSelection();n.empty!==void 0?n.empty():n.removeAllRanges!==void 0&&(n.removeAllRanges(),Ce.is.mobile!==!0&&n.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function F(n,t,o){const l=I(n);let e,i=l.left-t.event.x,r=l.top-t.event.y,s=Math.abs(i),c=Math.abs(r);const a=t.direction;a.horizontal===!0&&a.vertical!==!0?e=i<0?"left":"right":a.horizontal!==!0&&a.vertical===!0?e=r<0?"up":"down":a.up===!0&&r<0?(e="up",s>c&&(a.left===!0&&i<0?e="left":a.right===!0&&i>0&&(e="right"))):a.down===!0&&r>0?(e="down",s>c&&(a.left===!0&&i<0?e="left":a.right===!0&&i>0&&(e="right"))):a.left===!0&&i<0?(e="left",s<c&&(a.up===!0&&r<0?e="up":a.down===!0&&r>0&&(e="down"))):a.right===!0&&i>0&&(e="right",s<c&&(a.up===!0&&r<0?e="up":a.down===!0&&r>0&&(e="down")));let h=!1;if(e===void 0&&o===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};e=t.event.lastDir,h=!0,e==="left"||e==="right"?(l.left-=i,s=0,i=0):(l.top-=r,c=0,r=0)}return{synthetic:h,payload:{evt:n,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:l,direction:e,isFirst:t.event.isFirst,isFinal:o===!0,duration:Date.now()-t.event.time,distance:{x:s,y:c},offset:{x:i,y:r},delta:{x:l.left-t.event.lastX,y:l.top-t.event.lastY}}}}let Ve=0;const tt=Se({name:"touch-pan",beforeMount(n,{value:t,modifiers:o}){if(o.mouse!==!0&&M.has.touch!==!0)return;function l(i,r){o.mouse===!0&&r===!0?fe(i):(o.stop===!0&&N(i),o.prevent===!0&&z(i))}const e={uid:"qvtp_"+Ve++,handler:t,modifiers:o,direction:oe(o),noop:He,mouseStart(i){le(i,e)&&Me(i)&&(E(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(i,!0))},touchStart(i){if(le(i,e)){const r=i.target;E(e,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","passiveCapture"],[r,"touchend","end","passiveCapture"]]),e.start(i)}},start(i,r){if(M.is.firefox===!0&&X(n,!0),e.lastEvt=i,r===!0||o.stop===!0){if(e.direction.all!==!0&&(r!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const a=i.type.indexOf("mouse")!==-1?new MouseEvent(i.type,i):new TouchEvent(i.type,i);i.defaultPrevented===!0&&z(a),i.cancelBubble===!0&&N(a),Object.assign(a,{qKeyEvent:i.qKeyEvent,qClickOutside:i.qClickOutside,qAnchorHandled:i.qAnchorHandled,qClonedBy:i.qClonedBy===void 0?[e.uid]:i.qClonedBy.concat(e.uid)}),e.initialEvent={target:i.target,event:a}}N(i)}const{left:s,top:c}=I(i);e.event={x:s,y:c,time:Date.now(),mouse:r===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:s,lastY:c}},move(i){if(e.event===void 0)return;const r=I(i),s=r.left-e.event.x,c=r.top-e.event.y;if(s===0&&c===0)return;e.lastEvt=i;const a=e.event.mouse===!0,h=()=>{l(i,a);let u;o.preserveCursor!==!0&&o.preservecursor!==!0&&(u=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),a===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),$(),e.styleCleanup=d=>{if(e.styleCleanup=void 0,u!==void 0&&(document.documentElement.style.cursor=u),document.body.classList.remove("non-selectable"),a===!0){const b=()=>{document.body.classList.remove("no-pointer-events--children")};d!==void 0?setTimeout(()=>{b(),d()},50):b()}else d!==void 0&&d()}};if(e.event.detected===!0){e.event.isFirst!==!0&&l(i,e.event.mouse);const{payload:u,synthetic:d}=F(i,e,!1);u!==void 0&&(e.handler(u)===!1?e.end(i):(e.styleCleanup===void 0&&e.event.isFirst===!0&&h(),e.event.lastX=u.position.left,e.event.lastY=u.position.top,e.event.lastDir=d===!0?void 0:u.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||a===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){h(),e.event.detected=!0,e.move(i);return}const m=Math.abs(s),v=Math.abs(c);m!==v&&(e.direction.horizontal===!0&&m>v||e.direction.vertical===!0&&m<v||e.direction.up===!0&&m<v&&c<0||e.direction.down===!0&&m<v&&c>0||e.direction.left===!0&&m>v&&s<0||e.direction.right===!0&&m>v&&s>0?(e.event.detected=!0,e.move(i)):e.end(i,!0))},end(i,r){if(e.event!==void 0){if(q(e,"temp"),M.is.firefox===!0&&X(n,!1),r===!0)e.styleCleanup?.(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(F(i===void 0?e.lastEvt:i,e).payload);const{payload:s}=F(i===void 0?e.lastEvt:i,e,!0),c=()=>{e.handler(s)};e.styleCleanup!==void 0?e.styleCleanup(c):c()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(n.__qtouchpan=e,o.mouse===!0){const i=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";E(e,"main",[[n,"mousedown","mouseStart",`passive${i}`]])}M.has.touch===!0&&E(e,"main",[[n,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[n,"touchmove","noop","notPassiveCapture"]])},updated(n,t){const o=n.__qtouchpan;o!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&o.end(),o.handler=t.value),o.direction=oe(t.modifiers))},beforeUnmount(n){const t=n.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),q(t,"main"),q(t,"temp"),M.is.firefox===!0&&X(n,!1),t.styleCleanup?.(),delete n.__qtouchpan)}});function nt(n,t,o){return o<=t?t:Math.min(o,Math.max(t,n))}function it(n,t,o){if(o<=t)return t;const l=o-t+1;let e=t+(n-t)%l;return e<t&&(e=l+e),e===0?0:e}const ve={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},ot={...ve,contextMenu:Boolean};function Ie({showing:n,avoidEmit:t,configureAnchorEl:o}){const{props:l,proxy:e,emit:i}=he(),r=O(null);let s=null;function c(u){return r.value===null?!1:u===void 0||u.touches===void 0||u.touches.length<=1}const a={};o===void 0&&(Object.assign(a,{hide(u){e.hide(u)},toggle(u){e.toggle(u),u.qAnchorHandled=!0},toggleKey(u){Pe(u,13)===!0&&a.toggle(u)},contextClick(u){e.hide(u),z(u),qe(()=>{e.show(u),u.qAnchorHandled=!0})},prevent:z,mobileTouch(u){if(a.mobileCleanup(u),c(u)!==!0)return;e.hide(u),r.value.classList.add("non-selectable");const d=u.target;E(a,"anchor",[[d,"touchmove","mobileCleanup","passive"],[d,"touchend","mobileCleanup","passive"],[d,"touchcancel","mobileCleanup","passive"],[r.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,e.show(u),u.qAnchorHandled=!0},300)},mobileCleanup(u){r.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),n.value===!0&&u!==void 0&&$()}}),o=function(u=l.contextMenu){if(l.noParentEvent===!0||r.value===null)return;let d;u===!0?e.$q.platform.is.mobile===!0?d=[[r.value,"touchstart","mobileTouch","passive"]]:d=[[r.value,"mousedown","hide","passive"],[r.value,"contextmenu","contextClick","notPassive"]]:d=[[r.value,"click","toggle","passive"],[r.value,"keyup","toggleKey","passive"]],E(a,"anchor",d)});function h(){q(a,"anchor")}function m(u){for(r.value=u;r.value.classList.contains("q-anchor--skip");)r.value=r.value.parentNode;o()}function v(){if(l.target===!1||l.target===""||e.$el.parentNode===null)r.value=null;else if(l.target===!0)m(e.$el.parentNode);else{let u=l.target;if(typeof l.target=="string")try{u=document.querySelector(l.target)}catch{u=void 0}u!=null?(r.value=u.$el||u,o()):(r.value=null,console.error(`Anchor: target "${l.target}" not found`))}}return P(()=>l.contextMenu,u=>{r.value!==null&&(h(),o(u))}),P(()=>l.target,()=>{r.value!==null&&h(),v()}),P(()=>l.noParentEvent,u=>{r.value!==null&&(u===!0?h():o())}),Le(()=>{v(),t!==!0&&l.modelValue===!0&&r.value===null&&i("update:modelValue",!1)}),B(()=>{s!==null&&clearTimeout(s),h()}),{anchorEl:r,canShow:c,anchorEvents:a}}function Ke(n,t){const o=O(null);let l;function e(s,c){const a=`${c!==void 0?"add":"remove"}EventListener`,h=c!==void 0?c:l;s!==window&&s[a]("scroll",h,K.passive),window[a]("scroll",h,K.passive),l=c}function i(){o.value!==null&&(e(o.value),o.value=null)}const r=P(()=>n.noParentEvent,()=>{o.value!==null&&(i(),t())});return B(r),{localScrollTarget:o,unconfigureScrollTarget:i,changeScrollEvent:e}}const{notPassiveCapture:D}=K,S=[];function j(n){const t=n.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let o=ne.length-1;for(;o>=0;){const l=ne[o].$;if(l.type.name==="QTooltip"){o--;continue}if(l.type.name!=="QDialog")break;if(l.props.seamless!==!0)return;o--}for(let l=S.length-1;l>=0;l--){const e=S[l];if((e.anchorEl.value===null||e.anchorEl.value.contains(t)===!1)&&(t===document.body||e.innerRef.value!==null&&e.innerRef.value.contains(t)===!1))n.qClickOutside=!0,e.onClickOutside(n);else return}}function Qe(n){S.push(n),S.length===1&&(document.addEventListener("mousedown",j,D),document.addEventListener("touchstart",j,D))}function re(n){const t=S.findIndex(o=>o===n);t!==-1&&(S.splice(t,1),S.length===0&&(document.removeEventListener("mousedown",j,D),document.removeEventListener("touchstart",j,D)))}let ae,ue;function se(n){const t=n.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ue(n){return n?!(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number"):!0}const Q={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(n=>{Q[`${n}#ltr`]=n,Q[`${n}#rtl`]=n});function ce(n,t){const o=n.split(" ");return{vertical:o[0],horizontal:Q[`${o[1]}#${t===!0?"rtl":"ltr"}`]}}function Ge(n,t){let{top:o,left:l,right:e,bottom:i,width:r,height:s}=n.getBoundingClientRect();return t!==void 0&&(o-=t[1],l-=t[0],i+=t[1],e+=t[0],r+=t[0],s+=t[1]),{top:o,bottom:i,height:s,left:l,right:e,width:r,middle:l+(e-l)/2,center:o+(i-o)/2}}function Je(n,t,o){let{top:l,left:e}=n.getBoundingClientRect();return l+=t.top,e+=t.left,o!==void 0&&(l+=o[1],e+=o[0]),{top:l,bottom:l+1,height:1,left:e,right:e+1,width:1,middle:e,center:l}}function Ze(n,t){return{top:0,center:t/2,bottom:t,left:0,middle:n/2,right:n}}function de(n,t,o,l){return{top:n[o.vertical]-t[l.vertical],left:n[o.horizontal]-t[l.horizontal]}}function me(n,t=0){if(n.targetEl===null||n.anchorEl===null||t>5)return;if(n.targetEl.offsetHeight===0||n.targetEl.offsetWidth===0){setTimeout(()=>{me(n,t+1)},10);return}const{targetEl:o,offset:l,anchorEl:e,anchorOrigin:i,selfOrigin:r,absoluteOffset:s,fit:c,cover:a,maxHeight:h,maxWidth:m}=n;if(M.is.ios===!0&&window.visualViewport!==void 0){const H=document.body.style,{offsetLeft:y,offsetTop:w}=window.visualViewport;y!==ae&&(H.setProperty("--q-pe-left",y+"px"),ae=y),w!==ue&&(H.setProperty("--q-pe-top",w+"px"),ue=w)}const{scrollLeft:v,scrollTop:u}=o,d=s===void 0?Ge(e,a===!0?[0,0]:l):Je(e,s,l);Object.assign(o.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:m,maxHeight:h,visibility:"visible"});const{offsetWidth:b,offsetHeight:L}=o,{elWidth:R,elHeight:k}=c===!0||a===!0?{elWidth:Math.max(d.width,b),elHeight:a===!0?Math.max(d.height,L):L}:{elWidth:b,elHeight:L};let g={maxWidth:m,maxHeight:h};(c===!0||a===!0)&&(g.minWidth=d.width+"px",a===!0&&(g.minHeight=d.height+"px")),Object.assign(o.style,g);const T=Ze(R,k);let f=de(d,T,i,r);if(s===void 0||l===void 0)V(f,d,T,i,r);else{const{top:H,left:y}=f;V(f,d,T,i,r);let w=!1;if(f.top!==H){w=!0;const x=2*l[1];d.center=d.top-=x,d.bottom-=x+2}if(f.left!==y){w=!0;const x=2*l[0];d.middle=d.left-=x,d.right-=x+2}w===!0&&(f=de(d,T,i,r),V(f,d,T,i,r))}g={top:f.top+"px",left:f.left+"px"},f.maxHeight!==void 0&&(g.maxHeight=f.maxHeight+"px",d.height>f.maxHeight&&(g.minHeight=g.maxHeight)),f.maxWidth!==void 0&&(g.maxWidth=f.maxWidth+"px",d.width>f.maxWidth&&(g.minWidth=g.maxWidth)),Object.assign(o.style,g),o.scrollTop!==u&&(o.scrollTop=u),o.scrollLeft!==v&&(o.scrollLeft=v)}function V(n,t,o,l,e){const i=o.bottom,r=o.right,s=We(),c=window.innerHeight-s,a=document.body.clientWidth;if(n.top<0||n.top+i>c)if(e.vertical==="center")n.top=t[l.vertical]>c/2?Math.max(0,c-i):0,n.maxHeight=Math.min(i,c);else if(t[l.vertical]>c/2){const h=Math.min(c,l.vertical==="center"?t.center:l.vertical===e.vertical?t.bottom:t.top);n.maxHeight=Math.min(i,h),n.top=Math.max(0,h-i)}else n.top=Math.max(0,l.vertical==="center"?t.center:l.vertical===e.vertical?t.top:t.bottom),n.maxHeight=Math.min(i,c-n.top);if(n.left<0||n.left+r>a)if(n.maxWidth=Math.min(r,a),e.horizontal==="middle")n.left=t[l.horizontal]>a/2?Math.max(0,a-r):0;else if(t[l.horizontal]>a/2){const h=Math.min(a,l.horizontal==="middle"?t.middle:l.horizontal===e.horizontal?t.right:t.left);n.maxWidth=Math.min(r,h),n.left=Math.max(0,h-n.maxWidth)}else n.left=Math.max(0,l.horizontal==="middle"?t.middle:l.horizontal===e.horizontal?t.left:t.right),n.maxWidth=Math.min(r,a-n.left)}const lt=ke({name:"QTooltip",inheritAttrs:!1,props:{...ve,...Oe,...Y,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Y.transitionShow,default:"jump-down"},transitionHide:{...Y.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:se},self:{type:String,default:"top middle",validator:se},offset:{type:Array,default:()=>[14,14],validator:Ue},scrollTarget:ze,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Ae],setup(n,{slots:t,emit:o,attrs:l}){let e,i;const r=he(),{proxy:{$q:s}}=r,c=O(null),a=O(!1),h=A(()=>ce(n.anchor,s.lang.rtl)),m=A(()=>ce(n.self,s.lang.rtl)),v=A(()=>n.persistent!==!0),{registerTick:u,removeTick:d}=Be(),{registerTimeout:b}=$e(),{transitionProps:L,transitionStyle:R}=De(n),{localScrollTarget:k,changeScrollEvent:g,unconfigureScrollTarget:T}=Ke(n,ee),{anchorEl:f,canShow:H,anchorEvents:y}=Ie({showing:a,configureAnchorEl:xe}),{show:w,hide:x}=je({showing:a,canShow:H,handleShow:ge,handleHide:ye,hideOnRouteChange:v,processOnMount:!0});Object.assign(y,{delayShow:be,delayHide:we});const{showPortal:G,hidePortal:J,renderPortal:pe}=Re(r,c,Te,"tooltip");if(s.platform.is.mobile===!0){const p={anchorEl:f,innerRef:c,onClickOutside(C){return x(C),C.target.classList.contains("q-dialog__backdrop")&&fe(C),!0}},_=A(()=>n.modelValue===null&&n.persistent!==!0&&a.value===!0);P(_,C=>{(C===!0?Qe:re)(p)}),B(()=>{re(p)})}function ge(p){G(),u(()=>{i=new MutationObserver(()=>W()),i.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),W(),ee()}),e===void 0&&(e=P(()=>s.screen.width+"|"+s.screen.height+"|"+n.self+"|"+n.anchor+"|"+s.lang.rtl,W)),b(()=>{G(!0),o("show",p)},n.transitionDuration)}function ye(p){d(),J(),Z(),b(()=>{J(!0),o("hide",p)},n.transitionDuration)}function Z(){i!==void 0&&(i.disconnect(),i=void 0),e!==void 0&&(e(),e=void 0),T(),q(y,"tooltipTemp")}function W(){me({targetEl:c.value,offset:n.offset,anchorEl:f.value,anchorOrigin:h.value,selfOrigin:m.value,maxHeight:n.maxHeight,maxWidth:n.maxWidth})}function be(p){if(s.platform.is.mobile===!0){$(),document.body.classList.add("non-selectable");const _=f.value,C=["touchmove","touchcancel","touchend","click"].map(te=>[_,te,"delayHide","passiveCapture"]);E(y,"tooltipTemp",C)}b(()=>{w(p)},n.delay)}function we(p){s.platform.is.mobile===!0&&(q(y,"tooltipTemp"),$(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),b(()=>{x(p)},n.hideDelay)}function xe(){if(n.noParentEvent===!0||f.value===null)return;const p=s.platform.is.mobile===!0?[[f.value,"touchstart","delayShow","passive"]]:[[f.value,"mouseenter","delayShow","passive"],[f.value,"mouseleave","delayHide","passive"]];E(y,"anchor",p)}function ee(){if(f.value!==null||n.scrollTarget!==void 0){k.value=_e(f.value,n.scrollTarget);const p=n.noParentEvent===!0?W:x;g(k.value,p)}}function Ee(){return a.value===!0?ie("div",{...l,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",l.class],style:[l.style,R.value],role:"tooltip"},Ne(t.default)):null}function Te(){return ie(Xe,L.value,Ee)}return B(Z),Object.assign(r.proxy,{updatePosition:W}),pe}});export{lt as Q,tt as T,se as a,nt as b,Ke as c,Ie as d,Qe as e,it as n,ce as p,re as r,me as s,ot as u,Ue as v};
